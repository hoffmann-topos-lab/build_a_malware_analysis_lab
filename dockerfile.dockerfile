# Usando a imagem base do REMnux
FROM remnux/remnux-distro

# Instalação de programas adicionais no ambiente REMnux
RUN sudo apt-get update && sudo apt-get install -y \
    exiftool \
    wireshark \
    gdb \
    radare2 \
    wine \
    inetutils-tools \
    && sudo apt-get clean && rm -rf /var/lib/apt/lists/*

# Instalando INetSim
RUN sudo apt-get update && sudo apt-get install -y inetsim

# Instalando fakenet-ng
RUN sudo apt-get update && sudo pip3 install fakenet-ng

# Instalando oletools
RUN sudo pip3 install oletools

# Instalando peepdf
RUN sudo pip3 install peepdf

# Instalando floss
RUN sudo pip3 install floss

# Instalando Ghidra
# Ghidra pode ser baixado e instalado manualmente, mas é uma ferramenta Java, portanto, é necessário um ambiente Java
RUN sudo apt-get update && sudo apt-get install -y default-jdk \
    && wget https://ghidra-sre.org/ghidra_10.0.4_PUBLIC_20210521.zip \
    && unzip ghidra_10.0.4_PUBLIC_20210521.zip -d /opt/ghidra \
    && rm ghidra_10.0.4_PUBLIC_20210521.zip

# Instalando Yara
RUN sudo apt-get update && sudo apt-get install -y yara

# Instalando DiE (Detect It Easy)
# DiE precisa ser baixado e instalado a partir do código-fonte ou de um pacote precompilado
RUN wget https://github.com/horsicq/DIE-engine/releases/download/3.00/die_lin64_portable_3.00.tar.gz \
    && tar -xzvf die_lin64_portable_3.00.tar.gz -C /opt/ \
    && rm die_lin64_portable_3.00.tar.gz

# Instalando Volatility
RUN sudo apt-get update && sudo apt-get install -y volatility

# Definindo o diretório de trabalho
WORKDIR /workspace

# Comando padrão ao iniciar o contêiner
CMD ["/bin/bash"]
